{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRouteMatcher = getRouteMatcher;\n\nvar _utils = require(\"../../utils\");\n\nfunction getRouteMatcher(routeRegex) {\n  var re = routeRegex.re,\n      groups = routeRegex.groups;\n  return function (pathname) {\n    var routeMatch = re.exec(pathname);\n\n    if (!routeMatch) {\n      return false;\n    }\n\n    var decode = function decode(param) {\n      try {\n        return decodeURIComponent(param);\n      } catch (_) {\n        throw new _utils.DecodeError('failed to decode param');\n      }\n    };\n\n    var params = {};\n    Object.keys(groups).forEach(function (slugName) {\n      var g = groups[slugName];\n      var m = routeMatch[g.pos];\n\n      if (m !== undefined) {\n        params[slugName] = ~m.indexOf('/') ? m.split('/').map(function (entry) {\n          return decode(entry);\n        }) : g.repeat ? [decode(m)] : decode(m);\n      }\n    });\n    return params;\n  };\n}","map":{"version":3,"sources":["../../../../../shared/lib/router/utils/route-matcher.ts"],"names":[],"mappings":";;;;;QAGgB,e,GAAA,e;;AAHY,IAAA,MAAa,GAAA,OAAA,CAAA,aAAA,CAAb;;SAGZ,e,CAAgB,U,EAA8C;AAC5E,MAAQ,EAAR,GAAuB,UAAvB,CAAQ,EAAR;AAAA,MAAY,MAAZ,GAAuB,UAAvB,CAAY,MAAZ;mBACQ,Q,EAAwC;AAC9C,QAAM,UAAU,GAAG,EAAE,CAAC,IAAH,CAAQ,QAAR,CAAnB;;AACA,QAAE,CAAG,UAAL,EAAiB;aACR,K;AACR;;AAED,QAAM,MAAM,GAAA,SAAN,MAAM,CAAI,KAAJ,EAAsB;UAC5B;eACK,kBAAkB,CAAC,KAAD,C;AAC1B,O,CAAA,OAAQ,CAAR,EAAW;AACV,cAAM,IAfc,MAAa,CAAA,WAe3B,CAf2B,wBAe3B,CAAN;AACD;AACF,KAND;;AAOA,QAAM,MAAM,GAAA,EAAZ;AAEA,IAAA,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,OAApB,CAA2B,UAAE,QAAF,EAAuB;AAChD,UAAM,CAAC,GAAG,MAAM,CAAC,QAAD,CAAhB;AACA,UAAM,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,GAAH,CAApB;;AACA,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,QAAA,MAAM,CAAC,QAAD,CAAN,GAAe,CAAK,CAAC,CAAC,OAAF,CAAS,GAAT,CAAL,GACX,CAAC,CAAC,KAAF,CAAO,GAAP,EAAa,GAAb,CAAgB,UAAE,KAAF;AAAA,iBAAY,MAAM,CAAC,KAAD,CAAlB;AAAA,SAAhB,CADW,GAEX,CAAC,CAAC,MAAF,GAAQ,CACP,MAAM,CAAC,CAAD,CADC,CAAR,GAEA,MAAM,CAAC,CAAD,CAJV;AAKD;AACF,KAVD;WAWO,M;AACR,G;AACF","sourcesContent":["import { DecodeError } from '../../utils'\nimport { getRouteRegex } from './route-regex'\n\nexport function getRouteMatcher(routeRegex: ReturnType<typeof getRouteRegex>) {\n  const { re, groups } = routeRegex\n  return (pathname: string | null | undefined) => {\n    const routeMatch = re.exec(pathname!)\n    if (!routeMatch) {\n      return false\n    }\n\n    const decode = (param: string) => {\n      try {\n        return decodeURIComponent(param)\n      } catch (_) {\n        throw new DecodeError('failed to decode param')\n      }\n    }\n    const params: { [paramName: string]: string | string[] } = {}\n\n    Object.keys(groups).forEach((slugName: string) => {\n      const g = groups[slugName]\n      const m = routeMatch[g.pos]\n      if (m !== undefined) {\n        params[slugName] = ~m.indexOf('/')\n          ? m.split('/').map((entry) => decode(entry))\n          : g.repeat\n          ? [decode(m)]\n          : decode(m)\n      }\n    })\n    return params\n  }\n}\n"]},"metadata":{},"sourceType":"script"}