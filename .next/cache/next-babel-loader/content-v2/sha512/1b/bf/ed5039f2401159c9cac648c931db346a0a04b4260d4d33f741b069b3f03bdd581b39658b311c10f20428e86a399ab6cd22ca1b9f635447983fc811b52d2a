{"ast":null,"code":"\"use strict\";\n\nconst _excluded = [\"strategy\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"DocumentContext\", {\n  enumerable: true,\n  get: function () {\n    return _utils.DocumentContext;\n  }\n});\nObject.defineProperty(exports, \"DocumentInitialProps\", {\n  enumerable: true,\n  get: function () {\n    return _utils.DocumentInitialProps;\n  }\n});\nObject.defineProperty(exports, \"DocumentProps\", {\n  enumerable: true,\n  get: function () {\n    return _utils.DocumentProps;\n  }\n});\nexports.Html = Html;\nexports.Main = Main;\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _server = _interopRequireDefault(require(\"styled-jsx/server\"));\n\nvar _constants = require(\"../shared/lib/constants\");\n\nvar _utils = require(\"../shared/lib/utils\");\n\nvar _getPageFiles = require(\"../server/get-page-files\");\n\nvar _utils1 = require(\"../server/utils\");\n\nvar _htmlescape = require(\"../server/htmlescape\");\n\nvar _script = _interopRequireDefault(require(\"../client/script\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction getDocumentFiles(buildManifest, pathname, inAmpMode) {\n  const sharedFiles = (0, _getPageFiles).getPageFiles(buildManifest, '/_app');\n  const pageFiles = inAmpMode ? [] : (0, _getPageFiles).getPageFiles(buildManifest, pathname);\n  return {\n    sharedFiles,\n    pageFiles,\n    allFiles: [...new Set([...sharedFiles, ...pageFiles])]\n  };\n}\n\nfunction getPolyfillScripts(context, props) {\n  // polyfills.js has to be rendered as nomodule without async\n  // It also has to be the first script to load\n  const {\n    assetPrefix,\n    buildManifest,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading\n  } = context;\n  return buildManifest.polyfillFiles.filter(polyfill => polyfill.endsWith('.js') && !polyfill.endsWith('.module.js')).map(polyfill => /*#__PURE__*/_react.default.createElement(\"script\", {\n    key: polyfill,\n    defer: !disableOptimizedLoading,\n    nonce: props.nonce,\n    crossOrigin: props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN,\n    noModule: true,\n    src: `${assetPrefix}/_next/${polyfill}${devOnlyCacheBusterQueryString}`\n  }));\n}\n\nfunction getPreNextScripts(context, props) {\n  const {\n    scriptLoader,\n    disableOptimizedLoading\n  } = context;\n  return (scriptLoader.beforeInteractive || []).map((file, index) => {\n    const {\n      strategy\n    } = file,\n          scriptProps = _objectWithoutProperties(file, _excluded);\n\n    return /*#__PURE__*/_react.default.createElement(\"script\", Object.assign({}, scriptProps, {\n      key: scriptProps.src || index,\n      defer: !disableOptimizedLoading,\n      nonce: props.nonce,\n      \"data-nscript\": \"beforeInteractive\",\n      crossOrigin: props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    }));\n  });\n}\n\nfunction getDynamicChunks(context, props, files) {\n  const {\n    dynamicImports,\n    assetPrefix,\n    isDevelopment,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading\n  } = context;\n  return dynamicImports.map(file => {\n    if (!file.endsWith('.js') || files.allFiles.includes(file)) return null;\n    return /*#__PURE__*/_react.default.createElement(\"script\", {\n      async: !isDevelopment && disableOptimizedLoading,\n      defer: !disableOptimizedLoading,\n      key: file,\n      src: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n      nonce: props.nonce,\n      crossOrigin: props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    });\n  });\n}\n\nfunction getScripts(context, props, files) {\n  var ref;\n  const {\n    assetPrefix,\n    buildManifest,\n    isDevelopment,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading\n  } = context;\n  const normalScripts = files.allFiles.filter(file => file.endsWith('.js'));\n  const lowPriorityScripts = (ref = buildManifest.lowPriorityFiles) === null || ref === void 0 ? void 0 : ref.filter(file => file.endsWith('.js'));\n  return [...normalScripts, ...lowPriorityScripts].map(file => {\n    return /*#__PURE__*/_react.default.createElement(\"script\", {\n      key: file,\n      src: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n      nonce: props.nonce,\n      async: !isDevelopment && disableOptimizedLoading,\n      defer: !disableOptimizedLoading,\n      crossOrigin: props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    });\n  });\n}\n\nclass Document1 extends _react.Component {\n  /**\n  * `getInitialProps` hook returns the context object with the addition of `renderPage`.\n  * `renderPage` callback executes `React` rendering logic synchronously to support server-rendering wrappers\n  */\n  static async getInitialProps(ctx) {\n    const enhanceApp = App => {\n      return props => /*#__PURE__*/_react.default.createElement(App, Object.assign({}, props));\n    };\n\n    const {\n      html,\n      head\n    } = await ctx.renderPage({\n      enhanceApp\n    });\n    const styles = [...(0, _server).default()];\n    return {\n      html,\n      head,\n      styles\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_react.default.createElement(Html, null, /*#__PURE__*/_react.default.createElement(Head, null), /*#__PURE__*/_react.default.createElement(\"body\", null, /*#__PURE__*/_react.default.createElement(Main, null), /*#__PURE__*/_react.default.createElement(NextScript, null)));\n  }\n\n}\n\nexports.default = Document1;\n\nfunction Html(props) {\n  const {\n    inAmpMode,\n    docComponentsRendered,\n    locale\n  } = (0, _react).useContext(_utils.HtmlContext);\n  docComponentsRendered.Html = true;\n  return /*#__PURE__*/_react.default.createElement(\"html\", Object.assign({}, props, {\n    lang: props.lang || locale || undefined,\n    amp: inAmpMode ? '' : undefined,\n    \"data-ampdevmode\": inAmpMode && true ? '' : undefined\n  }));\n}\n\nclass Head extends _react.Component {\n  getCssLinks(files) {\n    const {\n      assetPrefix,\n      devOnlyCacheBusterQueryString,\n      dynamicImports\n    } = this.context;\n    const cssFiles = files.allFiles.filter(f => f.endsWith('.css'));\n    const sharedFiles = new Set(files.sharedFiles); // Unmanaged files are CSS files that will be handled directly by the\n    // webpack runtime (`mini-css-extract-plugin`).\n\n    let unmangedFiles = new Set([]);\n    let dynamicCssFiles = Array.from(new Set(dynamicImports.filter(file => file.endsWith('.css'))));\n\n    if (dynamicCssFiles.length) {\n      const existing = new Set(cssFiles);\n      dynamicCssFiles = dynamicCssFiles.filter(f => !(existing.has(f) || sharedFiles.has(f)));\n      unmangedFiles = new Set(dynamicCssFiles);\n      cssFiles.push(...dynamicCssFiles);\n    }\n\n    let cssLinkElements = [];\n    cssFiles.forEach(file => {\n      const isSharedFile = sharedFiles.has(file);\n\n      if (!process.env.__NEXT_OPTIMIZE_CSS) {\n        cssLinkElements.push( /*#__PURE__*/_react.default.createElement(\"link\", {\n          key: `${file}-preload`,\n          nonce: this.props.nonce,\n          rel: \"preload\",\n          href: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n          as: \"style\",\n          crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n        }));\n      }\n\n      const isUnmanagedFile = unmangedFiles.has(file);\n      cssLinkElements.push( /*#__PURE__*/_react.default.createElement(\"link\", {\n        key: file,\n        nonce: this.props.nonce,\n        rel: \"stylesheet\",\n        href: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n        crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN,\n        \"data-n-g\": isUnmanagedFile ? undefined : isSharedFile ? '' : undefined,\n        \"data-n-p\": isUnmanagedFile ? undefined : isSharedFile ? undefined : ''\n      }));\n    });\n\n    if (false && process.env.__NEXT_OPTIMIZE_FONTS) {\n      cssLinkElements = this.makeStylesheetInert(cssLinkElements);\n    }\n\n    return cssLinkElements.length === 0 ? null : cssLinkElements;\n  }\n\n  getPreloadDynamicChunks() {\n    const {\n      dynamicImports,\n      assetPrefix,\n      devOnlyCacheBusterQueryString\n    } = this.context;\n    return dynamicImports.map(file => {\n      if (!file.endsWith('.js')) {\n        return null;\n      }\n\n      return /*#__PURE__*/_react.default.createElement(\"link\", {\n        rel: \"preload\",\n        key: file,\n        href: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n        as: \"script\",\n        nonce: this.props.nonce,\n        crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n      });\n    }) // Filter out nulled scripts\n    .filter(Boolean);\n  }\n\n  getPreloadMainLinks(files) {\n    const {\n      assetPrefix,\n      devOnlyCacheBusterQueryString,\n      scriptLoader\n    } = this.context;\n    const preloadFiles = files.allFiles.filter(file => {\n      return file.endsWith('.js');\n    });\n    return [...(scriptLoader.beforeInteractive || []).map(file => /*#__PURE__*/_react.default.createElement(\"link\", {\n      key: file.src,\n      nonce: this.props.nonce,\n      rel: \"preload\",\n      href: file.src,\n      as: \"script\",\n      crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    })), ...preloadFiles.map(file => /*#__PURE__*/_react.default.createElement(\"link\", {\n      key: file,\n      nonce: this.props.nonce,\n      rel: \"preload\",\n      href: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n      as: \"script\",\n      crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    }))];\n  }\n\n  getDynamicChunks(files) {\n    return getDynamicChunks(this.context, this.props, files);\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props);\n  }\n\n  getScripts(files) {\n    return getScripts(this.context, this.props, files);\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props);\n  }\n\n  handleDocumentScriptLoaderItems(children) {\n    const {\n      scriptLoader\n    } = this.context;\n    const scriptLoaderItems = [];\n    const filteredChildren = [];\n\n    _react.default.Children.forEach(children, child => {\n      if (child.type === _script.default) {\n        if (child.props.strategy === 'beforeInteractive') {\n          scriptLoader.beforeInteractive = (scriptLoader.beforeInteractive || []).concat([_objectSpread({}, child.props)]);\n          return;\n        } else if (['lazyOnload', 'afterInteractive'].includes(child.props.strategy)) {\n          scriptLoaderItems.push(child.props);\n          return;\n        }\n      }\n\n      filteredChildren.push(child);\n    });\n\n    this.context.__NEXT_DATA__.scriptLoader = scriptLoaderItems;\n    return filteredChildren;\n  }\n\n  makeStylesheetInert(node) {\n    return _react.default.Children.map(node, c => {\n      if (c.type === 'link' && c.props['href'] && _constants.OPTIMIZED_FONT_PROVIDERS.some(({\n        url\n      }) => c.props['href'].startsWith(url))) {\n        const newProps = _objectSpread({}, c.props || {});\n\n        newProps['data-href'] = newProps['href'];\n        newProps['href'] = undefined;\n        return /*#__PURE__*/_react.default.cloneElement(c, newProps);\n      } else if (c.props && c.props['children']) {\n        c.props['children'] = this.makeStylesheetInert(c.props['children']);\n      }\n\n      return c;\n    });\n  }\n\n  render() {\n    const {\n      styles,\n      ampPath,\n      inAmpMode,\n      hybridAmp,\n      canonicalBase,\n      __NEXT_DATA__,\n      dangerousAsPath,\n      headTags,\n      unstable_runtimeJS,\n      unstable_JsPreload,\n      disableOptimizedLoading\n    } = this.context;\n    const disableRuntimeJS = unstable_runtimeJS === false;\n    const disableJsPreload = unstable_JsPreload === false || !disableOptimizedLoading;\n    this.context.docComponentsRendered.Head = true;\n    let {\n      head\n    } = this.context;\n    let cssPreloads = [];\n    let otherHeadElements = [];\n\n    if (head) {\n      head.forEach(c => {\n        if (c && c.type === 'link' && c.props['rel'] === 'preload' && c.props['as'] === 'style') {\n          cssPreloads.push(c);\n        } else {\n          c && otherHeadElements.push(c);\n        }\n      });\n      head = cssPreloads.concat(otherHeadElements);\n    }\n\n    let children = _react.default.Children.toArray(this.props.children).filter(Boolean); // show a warning if Head contains <title> (only in development)\n\n\n    if (true) {\n      children = _react.default.Children.map(children, child => {\n        var ref;\n        const isReactHelmet = child === null || child === void 0 ? void 0 : (ref = child.props) === null || ref === void 0 ? void 0 : ref['data-react-helmet'];\n\n        if (!isReactHelmet) {\n          var ref1;\n\n          if ((child === null || child === void 0 ? void 0 : child.type) === 'title') {\n            console.warn(\"Warning: <title> should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-title\");\n          } else if ((child === null || child === void 0 ? void 0 : child.type) === 'meta' && (child === null || child === void 0 ? void 0 : (ref1 = child.props) === null || ref1 === void 0 ? void 0 : ref1.name) === 'viewport') {\n            console.warn(\"Warning: viewport meta tags should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-viewport-meta\");\n          }\n        }\n\n        return child;\n      });\n      if (this.props.crossOrigin) console.warn('Warning: `Head` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated');\n    }\n\n    if (false && process.env.__NEXT_OPTIMIZE_FONTS && !inAmpMode) {\n      children = this.makeStylesheetInert(children);\n    }\n\n    children = this.handleDocumentScriptLoaderItems(children);\n    let hasAmphtmlRel = false;\n    let hasCanonicalRel = false; // show warning and remove conflicting amp head tags\n\n    head = _react.default.Children.map(head || [], child => {\n      if (!child) return child;\n      const {\n        type,\n        props\n      } = child;\n\n      if (inAmpMode) {\n        let badProp = '';\n\n        if (type === 'meta' && props.name === 'viewport') {\n          badProp = 'name=\"viewport\"';\n        } else if (type === 'link' && props.rel === 'canonical') {\n          hasCanonicalRel = true;\n        } else if (type === 'script') {\n          // only block if\n          // 1. it has a src and isn't pointing to ampproject's CDN\n          // 2. it is using dangerouslySetInnerHTML without a type or\n          // a type of text/javascript\n          if (props.src && props.src.indexOf('ampproject') < -1 || props.dangerouslySetInnerHTML && (!props.type || props.type === 'text/javascript')) {\n            badProp = '<script';\n            Object.keys(props).forEach(prop => {\n              badProp += ` ${prop}=\"${props[prop]}\"`;\n            });\n            badProp += '/>';\n          }\n        }\n\n        if (badProp) {\n          console.warn(`Found conflicting amp tag \"${child.type}\" with conflicting prop ${badProp} in ${__NEXT_DATA__.page}. https://nextjs.org/docs/messages/conflicting-amp-tag`);\n          return null;\n        }\n      } else {\n        // non-amp mode\n        if (type === 'link' && props.rel === 'amphtml') {\n          hasAmphtmlRel = true;\n        }\n      }\n\n      return child;\n    }); // try to parse styles from fragment for backwards compat\n\n    const curStyles = Array.isArray(styles) ? styles : [];\n\n    if (inAmpMode && styles && // @ts-ignore Property 'props' does not exist on type ReactElement\n    styles.props && // @ts-ignore Property 'props' does not exist on type ReactElement\n    Array.isArray(styles.props.children)) {\n      const hasStyles = el => {\n        var ref2, ref3;\n        return el === null || el === void 0 ? void 0 : (ref2 = el.props) === null || ref2 === void 0 ? void 0 : (ref3 = ref2.dangerouslySetInnerHTML) === null || ref3 === void 0 ? void 0 : ref3.__html;\n      }; // @ts-ignore Property 'props' does not exist on type ReactElement\n\n\n      styles.props.children.forEach(child => {\n        if (Array.isArray(child)) {\n          child.forEach(el => hasStyles(el) && curStyles.push(el));\n        } else if (hasStyles(child)) {\n          curStyles.push(child);\n        }\n      });\n    }\n\n    const files = getDocumentFiles(this.context.buildManifest, this.context.__NEXT_DATA__.page, inAmpMode);\n\n    var _nonce, _nonce1;\n\n    return /*#__PURE__*/_react.default.createElement(\"head\", Object.assign({}, this.props), this.context.isDevelopment && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"style\", {\n      \"data-next-hide-fouc\": true,\n      \"data-ampdevmode\": inAmpMode ? 'true' : undefined,\n      dangerouslySetInnerHTML: {\n        __html: `body{display:none}`\n      }\n    }), /*#__PURE__*/_react.default.createElement(\"noscript\", {\n      \"data-next-hide-fouc\": true,\n      \"data-ampdevmode\": inAmpMode ? 'true' : undefined\n    }, /*#__PURE__*/_react.default.createElement(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: `body{display:block}`\n      }\n    }))), children, process.env.__NEXT_OPTIMIZE_FONTS && /*#__PURE__*/_react.default.createElement(\"meta\", {\n      name: \"next-font-preconnect\"\n    }), head, /*#__PURE__*/_react.default.createElement(\"meta\", {\n      name: \"next-head-count\",\n      content: _react.default.Children.count(head || []).toString()\n    }), inAmpMode && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width,minimum-scale=1,initial-scale=1\"\n    }), !hasCanonicalRel && /*#__PURE__*/_react.default.createElement(\"link\", {\n      rel: \"canonical\",\n      href: canonicalBase + (0, _utils1).cleanAmpPath(dangerousAsPath)\n    }), /*#__PURE__*/_react.default.createElement(\"link\", {\n      rel: \"preload\",\n      as: \"script\",\n      href: \"https://cdn.ampproject.org/v0.js\"\n    }), styles && /*#__PURE__*/_react.default.createElement(\"style\", {\n      \"amp-custom\": \"\",\n      dangerouslySetInnerHTML: {\n        __html: curStyles.map(style => style.props.dangerouslySetInnerHTML.__html).join('').replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, '').replace(/\\/\\*@ sourceURL=.*?\\*\\//g, '')\n      }\n    }), /*#__PURE__*/_react.default.createElement(\"style\", {\n      \"amp-boilerplate\": \"\",\n      dangerouslySetInnerHTML: {\n        __html: `body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}`\n      }\n    }), /*#__PURE__*/_react.default.createElement(\"noscript\", null, /*#__PURE__*/_react.default.createElement(\"style\", {\n      \"amp-boilerplate\": \"\",\n      dangerouslySetInnerHTML: {\n        __html: `body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}`\n      }\n    })), /*#__PURE__*/_react.default.createElement(\"script\", {\n      async: true,\n      src: \"https://cdn.ampproject.org/v0.js\"\n    })), !inAmpMode && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, !hasAmphtmlRel && hybridAmp && /*#__PURE__*/_react.default.createElement(\"link\", {\n      rel: \"amphtml\",\n      href: canonicalBase + getAmpPath(ampPath, dangerousAsPath)\n    }), !process.env.__NEXT_OPTIMIZE_CSS && this.getCssLinks(files), !process.env.__NEXT_OPTIMIZE_CSS && /*#__PURE__*/_react.default.createElement(\"noscript\", {\n      \"data-n-css\": (_nonce = this.props.nonce) !== null && _nonce !== void 0 ? _nonce : ''\n    }), process.env.__NEXT_OPTIMIZE_IMAGES && /*#__PURE__*/_react.default.createElement(\"meta\", {\n      name: \"next-image-preload\"\n    }), !disableRuntimeJS && !disableJsPreload && this.getPreloadDynamicChunks(), !disableRuntimeJS && !disableJsPreload && this.getPreloadMainLinks(files), !disableOptimizedLoading && !disableRuntimeJS && this.getPolyfillScripts(), !disableOptimizedLoading && !disableRuntimeJS && this.getPreNextScripts(), !disableOptimizedLoading && !disableRuntimeJS && this.getDynamicChunks(files), !disableOptimizedLoading && !disableRuntimeJS && this.getScripts(files), process.env.__NEXT_OPTIMIZE_CSS && this.getCssLinks(files), process.env.__NEXT_OPTIMIZE_CSS && /*#__PURE__*/_react.default.createElement(\"noscript\", {\n      \"data-n-css\": (_nonce1 = this.props.nonce) !== null && _nonce1 !== void 0 ? _nonce1 : ''\n    }), this.context.isDevelopment && // this element is used to mount development styles so the\n    // ordering matches production\n    // (by default, style-loader injects at the bottom of <head />)\n\n    /*#__PURE__*/\n    _react.default.createElement(\"noscript\", {\n      id: \"__next_css__DO_NOT_USE__\"\n    }), styles || null), /*#__PURE__*/_react.default.createElement(_react.default.Fragment, {}, ...(headTags || [])));\n  }\n\n}\n\nexports.Head = Head;\nHead.contextType = _utils.HtmlContext;\n\nfunction Main() {\n  const {\n    inAmpMode,\n    docComponentsRendered\n  } = (0, _react).useContext(_utils.HtmlContext);\n  docComponentsRendered.Main = true;\n  if (inAmpMode) return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, _constants.BODY_RENDER_TARGET);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    id: \"__next\"\n  }, _constants.BODY_RENDER_TARGET);\n}\n\nclass NextScript extends _react.Component {\n  getDynamicChunks(files) {\n    return getDynamicChunks(this.context, this.props, files);\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props);\n  }\n\n  getScripts(files) {\n    return getScripts(this.context, this.props, files);\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props);\n  }\n\n  static getInlineScriptSource(context) {\n    const {\n      __NEXT_DATA__\n    } = context;\n\n    try {\n      const data = JSON.stringify(__NEXT_DATA__);\n      return (0, _htmlescape).htmlEscapeJsonString(data);\n    } catch (err) {\n      if (err.message.indexOf('circular structure')) {\n        throw new Error(`Circular structure in \"getInitialProps\" result of page \"${__NEXT_DATA__.page}\". https://nextjs.org/docs/messages/circular-structure`);\n      }\n\n      throw err;\n    }\n  }\n\n  render() {\n    const {\n      assetPrefix,\n      inAmpMode,\n      buildManifest,\n      unstable_runtimeJS,\n      docComponentsRendered,\n      devOnlyCacheBusterQueryString,\n      disableOptimizedLoading\n    } = this.context;\n    const disableRuntimeJS = unstable_runtimeJS === false;\n    docComponentsRendered.NextScript = true;\n\n    if (inAmpMode) {\n      if (false) {\n        return null;\n      }\n\n      const ampDevFiles = [...buildManifest.devFiles, ...buildManifest.polyfillFiles, ...buildManifest.ampDevFiles];\n      return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, disableRuntimeJS ? null : /*#__PURE__*/_react.default.createElement(\"script\", {\n        id: \"__NEXT_DATA__\",\n        type: \"application/json\",\n        nonce: this.props.nonce,\n        crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN,\n        dangerouslySetInnerHTML: {\n          __html: NextScript.getInlineScriptSource(this.context)\n        },\n        \"data-ampdevmode\": true\n      }), ampDevFiles.map(file => /*#__PURE__*/_react.default.createElement(\"script\", {\n        key: file,\n        src: `${assetPrefix}/_next/${file}${devOnlyCacheBusterQueryString}`,\n        nonce: this.props.nonce,\n        crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN,\n        \"data-ampdevmode\": true\n      })));\n    }\n\n    if (true) {\n      if (this.props.crossOrigin) console.warn('Warning: `NextScript` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated');\n    }\n\n    const files = getDocumentFiles(this.context.buildManifest, this.context.__NEXT_DATA__.page, inAmpMode);\n    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, !disableRuntimeJS && buildManifest.devFiles ? buildManifest.devFiles.map(file => /*#__PURE__*/_react.default.createElement(\"script\", {\n      key: file,\n      src: `${assetPrefix}/_next/${encodeURI(file)}${devOnlyCacheBusterQueryString}`,\n      nonce: this.props.nonce,\n      crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n    })) : null, disableRuntimeJS ? null : /*#__PURE__*/_react.default.createElement(\"script\", {\n      id: \"__NEXT_DATA__\",\n      type: \"application/json\",\n      nonce: this.props.nonce,\n      crossOrigin: this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN,\n      dangerouslySetInnerHTML: {\n        __html: NextScript.getInlineScriptSource(this.context)\n      }\n    }), disableOptimizedLoading && !disableRuntimeJS && this.getPolyfillScripts(), disableOptimizedLoading && !disableRuntimeJS && this.getPreNextScripts(), disableOptimizedLoading && !disableRuntimeJS && this.getDynamicChunks(files), disableOptimizedLoading && !disableRuntimeJS && this.getScripts(files));\n  }\n\n}\n\nexports.NextScript = NextScript;\nNextScript.contextType = _utils.HtmlContext;\nNextScript.safariNomoduleFix = '!function(){var e=document,t=e.createElement(\"script\");if(!(\"noModule\"in t)&&\"onbeforeload\"in t){var n=!1;e.addEventListener(\"beforeload\",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute(\"nomodule\")||!n)return;e.preventDefault()},!0),t.type=\"module\",t.src=\".\",e.head.appendChild(t),t.remove()}}();';\n\nfunction getAmpPath(ampPath, asPath) {\n  return ampPath || `${asPath}${asPath.includes('?') ? '&' : '?'}amp=1`;\n}","map":{"version":3,"sources":["../../pages/_document.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, ReactElement, ReactNode, useContext } from 'react'\nimport flush from 'styled-jsx/server'\nimport {\n  BODY_RENDER_TARGET,\n  OPTIMIZED_FONT_PROVIDERS,\n} from '../shared/lib/constants'\nimport {\n  DocumentContext,\n  DocumentInitialProps,\n  DocumentProps,\n  HtmlContext,\n  HtmlProps,\n} from '../shared/lib/utils'\nimport { BuildManifest, getPageFiles } from '../server/get-page-files'\nimport { cleanAmpPath } from '../server/utils'\nimport { htmlEscapeJsonString } from '../server/htmlescape'\nimport Script, { ScriptProps } from '../client/script'\n\nexport { DocumentContext, DocumentInitialProps, DocumentProps }\n\nexport type OriginProps = {\n  nonce?: string\n  crossOrigin?: string\n}\n\ntype DocumentFiles = {\n  sharedFiles: readonly string[]\n  pageFiles: readonly string[]\n  allFiles: readonly string[]\n}\n\nfunction getDocumentFiles(\n  buildManifest: BuildManifest,\n  pathname: string,\n  inAmpMode: boolean\n): DocumentFiles {\n  const sharedFiles: readonly string[] = getPageFiles(buildManifest, '/_app')\n  const pageFiles: readonly string[] = inAmpMode\n    ? []\n    : getPageFiles(buildManifest, pathname)\n\n  return {\n    sharedFiles,\n    pageFiles,\n    allFiles: [...new Set([...sharedFiles, ...pageFiles])],\n  }\n}\n\nfunction getPolyfillScripts(context: HtmlProps, props: OriginProps) {\n  // polyfills.js has to be rendered as nomodule without async\n  // It also has to be the first script to load\n  const {\n    assetPrefix,\n    buildManifest,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading,\n  } = context\n\n  return buildManifest.polyfillFiles\n    .filter(\n      (polyfill) => polyfill.endsWith('.js') && !polyfill.endsWith('.module.js')\n    )\n    .map((polyfill) => (\n      <script\n        key={polyfill}\n        defer={!disableOptimizedLoading}\n        nonce={props.nonce}\n        crossOrigin={props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN}\n        noModule={true}\n        src={`${assetPrefix}/_next/${polyfill}${devOnlyCacheBusterQueryString}`}\n      />\n    ))\n}\n\nfunction getPreNextScripts(context: HtmlProps, props: OriginProps) {\n  const { scriptLoader, disableOptimizedLoading } = context\n\n  return (scriptLoader.beforeInteractive || []).map(\n    (file: ScriptProps, index: number) => {\n      const { strategy, ...scriptProps } = file\n      return (\n        <script\n          {...scriptProps}\n          key={scriptProps.src || index}\n          defer={!disableOptimizedLoading}\n          nonce={props.nonce}\n          data-nscript=\"beforeInteractive\"\n          crossOrigin={props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN}\n        />\n      )\n    }\n  )\n}\n\nfunction getDynamicChunks(\n  context: HtmlProps,\n  props: OriginProps,\n  files: DocumentFiles\n) {\n  const {\n    dynamicImports,\n    assetPrefix,\n    isDevelopment,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading,\n  } = context\n\n  return dynamicImports.map((file) => {\n    if (!file.endsWith('.js') || files.allFiles.includes(file)) return null\n\n    return (\n      <script\n        async={!isDevelopment && disableOptimizedLoading}\n        defer={!disableOptimizedLoading}\n        key={file}\n        src={`${assetPrefix}/_next/${encodeURI(\n          file\n        )}${devOnlyCacheBusterQueryString}`}\n        nonce={props.nonce}\n        crossOrigin={props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN}\n      />\n    )\n  })\n}\n\nfunction getScripts(\n  context: HtmlProps,\n  props: OriginProps,\n  files: DocumentFiles\n) {\n  const {\n    assetPrefix,\n    buildManifest,\n    isDevelopment,\n    devOnlyCacheBusterQueryString,\n    disableOptimizedLoading,\n  } = context\n\n  const normalScripts = files.allFiles.filter((file) => file.endsWith('.js'))\n  const lowPriorityScripts = buildManifest.lowPriorityFiles?.filter((file) =>\n    file.endsWith('.js')\n  )\n\n  return [...normalScripts, ...lowPriorityScripts].map((file) => {\n    return (\n      <script\n        key={file}\n        src={`${assetPrefix}/_next/${encodeURI(\n          file\n        )}${devOnlyCacheBusterQueryString}`}\n        nonce={props.nonce}\n        async={!isDevelopment && disableOptimizedLoading}\n        defer={!disableOptimizedLoading}\n        crossOrigin={props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN}\n      />\n    )\n  })\n}\n\n/**\n * `Document` component handles the initial `document` markup and renders only on the server side.\n * Commonly used for implementing server side rendering for `css-in-js` libraries.\n */\nexport default class Document<P = {}> extends Component<DocumentProps & P> {\n  /**\n   * `getInitialProps` hook returns the context object with the addition of `renderPage`.\n   * `renderPage` callback executes `React` rendering logic synchronously to support server-rendering wrappers\n   */\n  static async getInitialProps(\n    ctx: DocumentContext\n  ): Promise<DocumentInitialProps> {\n    const enhanceApp = (App: any) => {\n      return (props: any) => <App {...props} />\n    }\n\n    const { html, head } = await ctx.renderPage({ enhanceApp })\n    const styles = [...flush()]\n    return { html, head, styles }\n  }\n\n  render() {\n    return (\n      <Html>\n        <Head />\n        <body>\n          <Main />\n          <NextScript />\n        </body>\n      </Html>\n    )\n  }\n}\n\nexport function Html(\n  props: React.DetailedHTMLProps<\n    React.HtmlHTMLAttributes<HTMLHtmlElement>,\n    HTMLHtmlElement\n  >\n) {\n  const { inAmpMode, docComponentsRendered, locale } = useContext(HtmlContext)\n\n  docComponentsRendered.Html = true\n\n  return (\n    <html\n      {...props}\n      lang={props.lang || locale || undefined}\n      amp={inAmpMode ? '' : undefined}\n      data-ampdevmode={\n        inAmpMode && process.env.NODE_ENV !== 'production' ? '' : undefined\n      }\n    />\n  )\n}\n\nexport class Head extends Component<\n  OriginProps &\n    React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLHeadElement>,\n      HTMLHeadElement\n    >\n> {\n  static contextType = HtmlContext\n\n  context!: React.ContextType<typeof HtmlContext>\n\n  getCssLinks(files: DocumentFiles): JSX.Element[] | null {\n    const { assetPrefix, devOnlyCacheBusterQueryString, dynamicImports } =\n      this.context\n    const cssFiles = files.allFiles.filter((f) => f.endsWith('.css'))\n    const sharedFiles: Set<string> = new Set(files.sharedFiles)\n\n    // Unmanaged files are CSS files that will be handled directly by the\n    // webpack runtime (`mini-css-extract-plugin`).\n    let unmangedFiles: Set<string> = new Set([])\n    let dynamicCssFiles = Array.from(\n      new Set(dynamicImports.filter((file) => file.endsWith('.css')))\n    )\n    if (dynamicCssFiles.length) {\n      const existing = new Set(cssFiles)\n      dynamicCssFiles = dynamicCssFiles.filter(\n        (f) => !(existing.has(f) || sharedFiles.has(f))\n      )\n      unmangedFiles = new Set(dynamicCssFiles)\n      cssFiles.push(...dynamicCssFiles)\n    }\n\n    let cssLinkElements: JSX.Element[] = []\n    cssFiles.forEach((file) => {\n      const isSharedFile = sharedFiles.has(file)\n\n      if (!process.env.__NEXT_OPTIMIZE_CSS) {\n        cssLinkElements.push(\n          <link\n            key={`${file}-preload`}\n            nonce={this.props.nonce}\n            rel=\"preload\"\n            href={`${assetPrefix}/_next/${encodeURI(\n              file\n            )}${devOnlyCacheBusterQueryString}`}\n            as=\"style\"\n            crossOrigin={\n              this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n            }\n          />\n        )\n      }\n\n      const isUnmanagedFile = unmangedFiles.has(file)\n      cssLinkElements.push(\n        <link\n          key={file}\n          nonce={this.props.nonce}\n          rel=\"stylesheet\"\n          href={`${assetPrefix}/_next/${encodeURI(\n            file\n          )}${devOnlyCacheBusterQueryString}`}\n          crossOrigin={\n            this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n          }\n          data-n-g={isUnmanagedFile ? undefined : isSharedFile ? '' : undefined}\n          data-n-p={isUnmanagedFile ? undefined : isSharedFile ? undefined : ''}\n        />\n      )\n    })\n\n    if (\n      process.env.NODE_ENV !== 'development' &&\n      process.env.__NEXT_OPTIMIZE_FONTS\n    ) {\n      cssLinkElements = this.makeStylesheetInert(\n        cssLinkElements\n      ) as ReactElement[]\n    }\n\n    return cssLinkElements.length === 0 ? null : cssLinkElements\n  }\n\n  getPreloadDynamicChunks() {\n    const { dynamicImports, assetPrefix, devOnlyCacheBusterQueryString } =\n      this.context\n\n    return (\n      dynamicImports\n        .map((file) => {\n          if (!file.endsWith('.js')) {\n            return null\n          }\n\n          return (\n            <link\n              rel=\"preload\"\n              key={file}\n              href={`${assetPrefix}/_next/${encodeURI(\n                file\n              )}${devOnlyCacheBusterQueryString}`}\n              as=\"script\"\n              nonce={this.props.nonce}\n              crossOrigin={\n                this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n              }\n            />\n          )\n        })\n        // Filter out nulled scripts\n        .filter(Boolean)\n    )\n  }\n\n  getPreloadMainLinks(files: DocumentFiles): JSX.Element[] | null {\n    const { assetPrefix, devOnlyCacheBusterQueryString, scriptLoader } =\n      this.context\n    const preloadFiles = files.allFiles.filter((file: string) => {\n      return file.endsWith('.js')\n    })\n\n    return [\n      ...(scriptLoader.beforeInteractive || []).map((file) => (\n        <link\n          key={file.src}\n          nonce={this.props.nonce}\n          rel=\"preload\"\n          href={file.src}\n          as=\"script\"\n          crossOrigin={\n            this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n          }\n        />\n      )),\n      ...preloadFiles.map((file: string) => (\n        <link\n          key={file}\n          nonce={this.props.nonce}\n          rel=\"preload\"\n          href={`${assetPrefix}/_next/${encodeURI(\n            file\n          )}${devOnlyCacheBusterQueryString}`}\n          as=\"script\"\n          crossOrigin={\n            this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n          }\n        />\n      )),\n    ]\n  }\n\n  getDynamicChunks(files: DocumentFiles) {\n    return getDynamicChunks(this.context, this.props, files)\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props)\n  }\n\n  getScripts(files: DocumentFiles) {\n    return getScripts(this.context, this.props, files)\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props)\n  }\n\n  handleDocumentScriptLoaderItems(children: React.ReactNode): ReactNode[] {\n    const { scriptLoader } = this.context\n    const scriptLoaderItems: ScriptProps[] = []\n    const filteredChildren: ReactNode[] = []\n\n    React.Children.forEach(children, (child: any) => {\n      if (child.type === Script) {\n        if (child.props.strategy === 'beforeInteractive') {\n          scriptLoader.beforeInteractive = (\n            scriptLoader.beforeInteractive || []\n          ).concat([\n            {\n              ...child.props,\n            },\n          ])\n          return\n        } else if (\n          ['lazyOnload', 'afterInteractive'].includes(child.props.strategy)\n        ) {\n          scriptLoaderItems.push(child.props)\n          return\n        }\n      }\n\n      filteredChildren.push(child)\n    })\n\n    this.context.__NEXT_DATA__.scriptLoader = scriptLoaderItems\n\n    return filteredChildren\n  }\n\n  makeStylesheetInert(node: ReactNode): ReactNode[] {\n    return React.Children.map(node, (c: any) => {\n      if (\n        c.type === 'link' &&\n        c.props['href'] &&\n        OPTIMIZED_FONT_PROVIDERS.some(({ url }) =>\n          c.props['href'].startsWith(url)\n        )\n      ) {\n        const newProps = { ...(c.props || {}) }\n        newProps['data-href'] = newProps['href']\n        newProps['href'] = undefined\n        return React.cloneElement(c, newProps)\n      } else if (c.props && c.props['children']) {\n        c.props['children'] = this.makeStylesheetInert(c.props['children'])\n      }\n      return c\n    })\n  }\n\n  render() {\n    const {\n      styles,\n      ampPath,\n      inAmpMode,\n      hybridAmp,\n      canonicalBase,\n      __NEXT_DATA__,\n      dangerousAsPath,\n      headTags,\n      unstable_runtimeJS,\n      unstable_JsPreload,\n      disableOptimizedLoading,\n    } = this.context\n\n    const disableRuntimeJS = unstable_runtimeJS === false\n    const disableJsPreload =\n      unstable_JsPreload === false || !disableOptimizedLoading\n\n    this.context.docComponentsRendered.Head = true\n\n    let { head } = this.context\n    let cssPreloads: Array<JSX.Element> = []\n    let otherHeadElements: Array<JSX.Element> = []\n    if (head) {\n      head.forEach((c) => {\n        if (\n          c &&\n          c.type === 'link' &&\n          c.props['rel'] === 'preload' &&\n          c.props['as'] === 'style'\n        ) {\n          cssPreloads.push(c)\n        } else {\n          c && otherHeadElements.push(c)\n        }\n      })\n      head = cssPreloads.concat(otherHeadElements)\n    }\n    let children = React.Children.toArray(this.props.children).filter(Boolean)\n    // show a warning if Head contains <title> (only in development)\n    if (process.env.NODE_ENV !== 'production') {\n      children = React.Children.map(children, (child: any) => {\n        const isReactHelmet = child?.props?.['data-react-helmet']\n        if (!isReactHelmet) {\n          if (child?.type === 'title') {\n            console.warn(\n              \"Warning: <title> should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-title\"\n            )\n          } else if (\n            child?.type === 'meta' &&\n            child?.props?.name === 'viewport'\n          ) {\n            console.warn(\n              \"Warning: viewport meta tags should not be used in _document.js's <Head>. https://nextjs.org/docs/messages/no-document-viewport-meta\"\n            )\n          }\n        }\n        return child\n      })\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `Head` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated'\n        )\n    }\n\n    if (\n      process.env.NODE_ENV !== 'development' &&\n      process.env.__NEXT_OPTIMIZE_FONTS &&\n      !inAmpMode\n    ) {\n      children = this.makeStylesheetInert(children)\n    }\n\n    children = this.handleDocumentScriptLoaderItems(children)\n\n    let hasAmphtmlRel = false\n    let hasCanonicalRel = false\n\n    // show warning and remove conflicting amp head tags\n    head = React.Children.map(head || [], (child) => {\n      if (!child) return child\n      const { type, props } = child\n      if (inAmpMode) {\n        let badProp: string = ''\n\n        if (type === 'meta' && props.name === 'viewport') {\n          badProp = 'name=\"viewport\"'\n        } else if (type === 'link' && props.rel === 'canonical') {\n          hasCanonicalRel = true\n        } else if (type === 'script') {\n          // only block if\n          // 1. it has a src and isn't pointing to ampproject's CDN\n          // 2. it is using dangerouslySetInnerHTML without a type or\n          // a type of text/javascript\n          if (\n            (props.src && props.src.indexOf('ampproject') < -1) ||\n            (props.dangerouslySetInnerHTML &&\n              (!props.type || props.type === 'text/javascript'))\n          ) {\n            badProp = '<script'\n            Object.keys(props).forEach((prop) => {\n              badProp += ` ${prop}=\"${props[prop]}\"`\n            })\n            badProp += '/>'\n          }\n        }\n\n        if (badProp) {\n          console.warn(\n            `Found conflicting amp tag \"${child.type}\" with conflicting prop ${badProp} in ${__NEXT_DATA__.page}. https://nextjs.org/docs/messages/conflicting-amp-tag`\n          )\n          return null\n        }\n      } else {\n        // non-amp mode\n        if (type === 'link' && props.rel === 'amphtml') {\n          hasAmphtmlRel = true\n        }\n      }\n      return child\n    })\n\n    // try to parse styles from fragment for backwards compat\n    const curStyles: React.ReactElement[] = Array.isArray(styles)\n      ? (styles as React.ReactElement[])\n      : []\n    if (\n      inAmpMode &&\n      styles &&\n      // @ts-ignore Property 'props' does not exist on type ReactElement\n      styles.props &&\n      // @ts-ignore Property 'props' does not exist on type ReactElement\n      Array.isArray(styles.props.children)\n    ) {\n      const hasStyles = (el: React.ReactElement) =>\n        el?.props?.dangerouslySetInnerHTML?.__html\n      // @ts-ignore Property 'props' does not exist on type ReactElement\n      styles.props.children.forEach((child: React.ReactElement) => {\n        if (Array.isArray(child)) {\n          child.forEach((el) => hasStyles(el) && curStyles.push(el))\n        } else if (hasStyles(child)) {\n          curStyles.push(child)\n        }\n      })\n    }\n\n    const files: DocumentFiles = getDocumentFiles(\n      this.context.buildManifest,\n      this.context.__NEXT_DATA__.page,\n      inAmpMode\n    )\n\n    return (\n      <head {...this.props}>\n        {this.context.isDevelopment && (\n          <>\n            <style\n              data-next-hide-fouc\n              data-ampdevmode={inAmpMode ? 'true' : undefined}\n              dangerouslySetInnerHTML={{\n                __html: `body{display:none}`,\n              }}\n            />\n            <noscript\n              data-next-hide-fouc\n              data-ampdevmode={inAmpMode ? 'true' : undefined}\n            >\n              <style\n                dangerouslySetInnerHTML={{\n                  __html: `body{display:block}`,\n                }}\n              />\n            </noscript>\n          </>\n        )}\n        {children}\n        {process.env.__NEXT_OPTIMIZE_FONTS && (\n          <meta name=\"next-font-preconnect\" />\n        )}\n        {head}\n        <meta\n          name=\"next-head-count\"\n          content={React.Children.count(head || []).toString()}\n        />\n        {inAmpMode && (\n          <>\n            <meta\n              name=\"viewport\"\n              content=\"width=device-width,minimum-scale=1,initial-scale=1\"\n            />\n            {!hasCanonicalRel && (\n              <link\n                rel=\"canonical\"\n                href={canonicalBase + cleanAmpPath(dangerousAsPath)}\n              />\n            )}\n            {/* https://www.ampproject.org/docs/fundamentals/optimize_amp#optimize-the-amp-runtime-loading */}\n            <link\n              rel=\"preload\"\n              as=\"script\"\n              href=\"https://cdn.ampproject.org/v0.js\"\n            />\n            {/* Add custom styles before AMP styles to prevent accidental overrides */}\n            {styles && (\n              <style\n                amp-custom=\"\"\n                dangerouslySetInnerHTML={{\n                  __html: curStyles\n                    .map((style) => style.props.dangerouslySetInnerHTML.__html)\n                    .join('')\n                    .replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, '')\n                    .replace(/\\/\\*@ sourceURL=.*?\\*\\//g, ''),\n                }}\n              />\n            )}\n            <style\n              amp-boilerplate=\"\"\n              dangerouslySetInnerHTML={{\n                __html: `body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}`,\n              }}\n            />\n            <noscript>\n              <style\n                amp-boilerplate=\"\"\n                dangerouslySetInnerHTML={{\n                  __html: `body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}`,\n                }}\n              />\n            </noscript>\n            <script async src=\"https://cdn.ampproject.org/v0.js\" />\n          </>\n        )}\n        {!inAmpMode && (\n          <>\n            {!hasAmphtmlRel && hybridAmp && (\n              <link\n                rel=\"amphtml\"\n                href={canonicalBase + getAmpPath(ampPath, dangerousAsPath)}\n              />\n            )}\n            {!process.env.__NEXT_OPTIMIZE_CSS && this.getCssLinks(files)}\n            {!process.env.__NEXT_OPTIMIZE_CSS && (\n              <noscript data-n-css={this.props.nonce ?? ''} />\n            )}\n            {process.env.__NEXT_OPTIMIZE_IMAGES && (\n              <meta name=\"next-image-preload\" />\n            )}\n            {!disableRuntimeJS &&\n              !disableJsPreload &&\n              this.getPreloadDynamicChunks()}\n            {!disableRuntimeJS &&\n              !disableJsPreload &&\n              this.getPreloadMainLinks(files)}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getPolyfillScripts()}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getPreNextScripts()}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getDynamicChunks(files)}\n            {!disableOptimizedLoading &&\n              !disableRuntimeJS &&\n              this.getScripts(files)}\n            {process.env.__NEXT_OPTIMIZE_CSS && this.getCssLinks(files)}\n            {process.env.__NEXT_OPTIMIZE_CSS && (\n              <noscript data-n-css={this.props.nonce ?? ''} />\n            )}\n            {this.context.isDevelopment && (\n              // this element is used to mount development styles so the\n              // ordering matches production\n              // (by default, style-loader injects at the bottom of <head />)\n              <noscript id=\"__next_css__DO_NOT_USE__\" />\n            )}\n            {styles || null}\n          </>\n        )}\n        {React.createElement(React.Fragment, {}, ...(headTags || []))}\n      </head>\n    )\n  }\n}\n\nexport function Main() {\n  const { inAmpMode, docComponentsRendered } = useContext(HtmlContext)\n\n  docComponentsRendered.Main = true\n\n  if (inAmpMode) return <>{BODY_RENDER_TARGET}</>\n  return <div id=\"__next\">{BODY_RENDER_TARGET}</div>\n}\n\nexport class NextScript extends Component<OriginProps> {\n  static contextType = HtmlContext\n\n  context!: React.ContextType<typeof HtmlContext>\n\n  // Source: https://gist.github.com/samthor/64b114e4a4f539915a95b91ffd340acc\n  static safariNomoduleFix =\n    '!function(){var e=document,t=e.createElement(\"script\");if(!(\"noModule\"in t)&&\"onbeforeload\"in t){var n=!1;e.addEventListener(\"beforeload\",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute(\"nomodule\")||!n)return;e.preventDefault()},!0),t.type=\"module\",t.src=\".\",e.head.appendChild(t),t.remove()}}();'\n\n  getDynamicChunks(files: DocumentFiles) {\n    return getDynamicChunks(this.context, this.props, files)\n  }\n\n  getPreNextScripts() {\n    return getPreNextScripts(this.context, this.props)\n  }\n\n  getScripts(files: DocumentFiles) {\n    return getScripts(this.context, this.props, files)\n  }\n\n  getPolyfillScripts() {\n    return getPolyfillScripts(this.context, this.props)\n  }\n\n  static getInlineScriptSource(context: Readonly<HtmlProps>): string {\n    const { __NEXT_DATA__ } = context\n    try {\n      const data = JSON.stringify(__NEXT_DATA__)\n      return htmlEscapeJsonString(data)\n    } catch (err) {\n      if (err.message.indexOf('circular structure')) {\n        throw new Error(\n          `Circular structure in \"getInitialProps\" result of page \"${__NEXT_DATA__.page}\". https://nextjs.org/docs/messages/circular-structure`\n        )\n      }\n      throw err\n    }\n  }\n\n  render() {\n    const {\n      assetPrefix,\n      inAmpMode,\n      buildManifest,\n      unstable_runtimeJS,\n      docComponentsRendered,\n      devOnlyCacheBusterQueryString,\n      disableOptimizedLoading,\n    } = this.context\n    const disableRuntimeJS = unstable_runtimeJS === false\n\n    docComponentsRendered.NextScript = true\n\n    if (inAmpMode) {\n      if (process.env.NODE_ENV === 'production') {\n        return null\n      }\n\n      const ampDevFiles = [\n        ...buildManifest.devFiles,\n        ...buildManifest.polyfillFiles,\n        ...buildManifest.ampDevFiles,\n      ]\n\n      return (\n        <>\n          {disableRuntimeJS ? null : (\n            <script\n              id=\"__NEXT_DATA__\"\n              type=\"application/json\"\n              nonce={this.props.nonce}\n              crossOrigin={\n                this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n              }\n              dangerouslySetInnerHTML={{\n                __html: NextScript.getInlineScriptSource(this.context),\n              }}\n              data-ampdevmode\n            />\n          )}\n          {ampDevFiles.map((file) => (\n            <script\n              key={file}\n              src={`${assetPrefix}/_next/${file}${devOnlyCacheBusterQueryString}`}\n              nonce={this.props.nonce}\n              crossOrigin={\n                this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n              }\n              data-ampdevmode\n            />\n          ))}\n        </>\n      )\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `NextScript` attribute `crossOrigin` is deprecated. https://nextjs.org/docs/messages/doc-crossorigin-deprecated'\n        )\n    }\n\n    const files: DocumentFiles = getDocumentFiles(\n      this.context.buildManifest,\n      this.context.__NEXT_DATA__.page,\n      inAmpMode\n    )\n\n    return (\n      <>\n        {!disableRuntimeJS && buildManifest.devFiles\n          ? buildManifest.devFiles.map((file: string) => (\n              <script\n                key={file}\n                src={`${assetPrefix}/_next/${encodeURI(\n                  file\n                )}${devOnlyCacheBusterQueryString}`}\n                nonce={this.props.nonce}\n                crossOrigin={\n                  this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n                }\n              />\n            ))\n          : null}\n        {disableRuntimeJS ? null : (\n          <script\n            id=\"__NEXT_DATA__\"\n            type=\"application/json\"\n            nonce={this.props.nonce}\n            crossOrigin={\n              this.props.crossOrigin || process.env.__NEXT_CROSS_ORIGIN\n            }\n            dangerouslySetInnerHTML={{\n              __html: NextScript.getInlineScriptSource(this.context),\n            }}\n          />\n        )}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getPolyfillScripts()}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getPreNextScripts()}\n        {disableOptimizedLoading &&\n          !disableRuntimeJS &&\n          this.getDynamicChunks(files)}\n        {disableOptimizedLoading && !disableRuntimeJS && this.getScripts(files)}\n      </>\n    )\n  }\n}\n\nfunction getAmpPath(ampPath: string, asPath: string): string {\n  return ampPath || `${asPath}${asPath.includes('?') ? '&' : '?'}amp=1`\n}\n"]},"metadata":{},"sourceType":"script"}